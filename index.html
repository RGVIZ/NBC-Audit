import React, { useState } from 'react';

/**
 * Audit Planning & Schedule Application
 * This is a single, self-contained React functional component using Tailwind CSS
 * and local state for navigation.
 */

// Navigation button helper component
const NavButton = ({ page, currentPage, setCurrentPage, icon, label }) => {
  const isActive = currentPage === page;
  const baseClasses = "flex items-center w-full p-3 rounded-xl transition-all duration-200";
  const activeClasses = "bg-indigo-600 shadow-lg text-white";
  const inactiveClasses = "text-indigo-200 hover:bg-indigo-700/50 hover:text-white";

  return (
    <button
      onClick={() => setCurrentPage(page)}
      className={`${baseClasses} ${isActive ? activeClasses : inactiveClasses}`}
    >
      {icon}
      <span className="font-medium">{label}</span>
    </button>
  );
};

// Mobile navigation button helper component
const MobileNavButton = ({ page, currentPage, setCurrentPage, icon, label }) => {
  const isActive = currentPage === page;
  const baseClasses = "flex-1 flex justify-center items-center py-2 px-3 text-sm font-semibold rounded-lg transition-all";
  const activeClasses = "bg-indigo-600 text-white";
  const inactiveClasses = "bg-gray-200 text-gray-700 hover:bg-gray-300";

  return (
    <button
      onClick={() => setCurrentPage(page)}
      className={`${baseClasses} ${isActive ? activeClasses : inactiveClasses}`}
    >
      {icon} {label}
    </button>
  );
};

// Main application component
const App = () => {
  const [currentPage, setCurrentPage] = useState('decisionMatrix');

  // --- SVG Icons (defined once for reuse) ---

  const CheckSquareIcon = (props = { size: 32, color: 'currentColor', classes: '' }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke={props.color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.classes}>
      <polyline points="9 11 12 14 22 4"></polyline>
      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
    </svg>
  );

  const SlidersIcon = (props = { size: 20, color: 'currentColor', classes: '' }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke={props.color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.classes}>
      <line x1="4" x2="4" y1="21" y2="14"></line><line x1="4" x2="4" y1="10" y2="3"></line><line x1="12" x2="12" y1="21" y2="12"></line><line x1="12" x2="12" y1="8" y2="3"></line><line x1="20" x2="20" y1="21" y2="16"></line><line x1="20" x2="20" y1="12" y2="3"></line><line x1="1" x2="7" y1="14" y2="14"></line><line x1="9" x2="15" y1="12" y2="12"></line><line x1="17" x2="23" y1="16" y2="16"></line>
    </svg>
  );

  const CalendarIcon = (props = { size: 20, color: 'currentColor', classes: '' }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke={props.color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.classes}>
      <path d="M8 2v4"></path><path d="M16 2v4"></path><rect width="18" height="18" x="3" y="4" rx="2"></rect><path d="M3 10h18"></path>
    </svg>
  );

  const SettingsIcon = (props = { size: 20, color: 'currentColor', classes: '' }) => (
    <svg xmlns="http://www.w3.org/2000/svg" width={props.size} height={props.size} viewBox="0 0 24 24" fill="none" stroke={props.color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={props.classes}>
      <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.19a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.23.46a2 2 0 0 0 .73 2.73l.15.08a2 2 0 0 1 1 1.73v.53a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.23.46a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.19a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.23-.46a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.52a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.23-.46a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"></path>
      <circle cx="12" cy="12" r="3"></circle>
    </svg>
  );

  // --- Dynamic Content Rendering ---

  const renderContent = () => {
    switch (currentPage) {
      case 'decisionMatrix':
        return (
          <div className="p-6 bg-white rounded-xl shadow-lg h-full overflow-y-auto">
            <h2 className="text-3xl font-bold text-gray-800 mb-4 flex items-center">
              <SlidersIcon size={24} color="currentColor" classes="w-6 h-6 mr-3 text-indigo-600" />
              Audit Decision Matrix
            </h2>
            <p className="text-gray-600 mb-6 border-b pb-4">
              This section will contain the interactive table where you define your line items and the corresponding conditions (like risk scores or compliance flags) to **automatically calculate the required audit count**.
            </p>
            <div className="bg-indigo-50 p-4 rounded-lg border-l-4 border-indigo-500">
              <h3 className="font-semibold text-indigo-800 mb-2">Next Focus: Defining the Matrix Inputs</h3>
              <ul className="list-disc list-inside text-sm text-indigo-700 space-y-1">
                <li>Design the structure for the line items (e.g., Department, Process Name).</li>
                <li>Implement the input fields for the condition scores.</li>
                <li>Write the logic to determine the final audit count based on these scores.</li>
              </ul>
            </div>
          </div>
        );
      case 'auditSchedule':
        return (
          <div className="p-6 bg-white rounded-xl shadow-lg h-full overflow-y-auto">
            <h2 className="text-3xl font-bold text-gray-800 mb-4 flex items-center">
              <CalendarIcon size={24} color="currentColor" classes="w-6 h-6 mr-3 text-green-600" />
              Audit Schedule
            </h2>
            <p className="text-gray-600 mb-6 border-b pb-4">
              This section will visualize the audits generated from the Decision Matrix, allowing you to assign auditors and set specific dates for each required audit.
            </p>
            <div className="bg-green-50 p-4 rounded-lg border-l-4 border-green-500">
              <h3 className="font-semibold text-green-800 mb-2">Future Scope for Scheduling:</h3>
              <ul className="list-disc list-inside text-sm text-green-700 space-y-1">
                <li>Display the list of audits (e.g., "3 Audits for Line Item A").</li>
                <li>Add date/time pickers for scheduling.</li>
                <li>Implement status tracking and filtering.</li>
              </ul>
            </div>
          </div>
        );
      case 'settings':
        return (
          <div className="p-6 bg-white rounded-xl shadow-lg h-full overflow-y-auto">
            <h2 className="text-3xl font-bold text-gray-800 mb-4 flex items-center">
              <SettingsIcon size={24} color="currentColor" classes="w-6 h-6 mr-3 text-gray-600" />
              Application Settings
            </h2>
            <p className="text-gray-600">Placeholder for global application configuration.</p>
          </div>
        );
      default:
        return null;
    }
  };

  // --- Main Layout ---

  return (
    <div className="min-h-screen bg-gray-100 flex font-sans antialiased">
      
      {/* 1. Sidebar Navigation (Desktop) */}
      <aside className="w-64 bg-indigo-900 text-white flex-shrink-0 p-4 shadow-2xl hidden md:flex flex-col">
        <div className="flex items-center mb-10 mt-4 px-2">
          <CheckSquareIcon size={32} color="#9fa8da" classes="mr-3" />
          <h1 className="text-xl font-extrabold tracking-wider">Audit Planner</h1>
        </div>

        <nav className="space-y-2 flex-grow">
          <NavButton
            page="decisionMatrix"
            currentPage={currentPage}
            setCurrentPage={setCurrentPage}
            icon={<SlidersIcon size={20} color="currentColor" classes="w-5 h-5 mr-3" />}
            label="Audit Decision Matrix"
          />
          <NavButton
            page="auditSchedule"
            currentPage={currentPage}
            setCurrentPage={setCurrentPage}
            icon={<CalendarIcon size={20} color="currentColor" classes="w-5 h-5 mr-3" />}
            label="Audit Schedule"
          />
        </nav>

        <div className="border-t border-indigo-700 pt-4 mt-auto">
          <NavButton
            page="settings"
            currentPage={currentPage}
            setCurrentPage={setCurrentPage}
            icon={<SettingsIcon size={20} color="currentColor" classes="w-5 h-5 mr-3" />}
            label="Settings"
          />
        </div>
      </aside>

      {/* 2. Main Content Area */}
      <main className="flex-grow p-4 md:p-8 overflow-y-auto">
        
        {/* Mobile Header/Navigation (Visible only on small screens) */}
        <header className="md:hidden bg-white p-4 rounded-xl shadow-lg mb-6">
            <h1 className="text-xl font-bold text-gray-800 mb-3 flex items-center">
                <CheckSquareIcon size={24} color="currentColor" classes="w-6 h-6 text-indigo-600 mr-2" />
                Audit Planner
            </h1>
            <div className="flex space-x-2">
                <MobileNavButton
                    page="decisionMatrix"
                    currentPage={currentPage}
                    setCurrentPage={setCurrentPage}
                    icon={<SlidersIcon size={16} color="currentColor" classes="w-4 h-4 mr-1" />}
                    label="Matrix"
                />
                <MobileNavButton
                    page="auditSchedule"
                    currentPage={currentPage}
                    setCurrentPage={setCurrentPage}
                    icon={<CalendarIcon size={16} color="currentColor" classes="w-4 h-4 mr-1" />}
                    label="Schedule"
                />
            </div>
        </header>

        {/* Dynamic Content */}
        <div className="h-full">
            {renderContent()}
        </div>
      </main>
    </div>
  );
};

export default App;
